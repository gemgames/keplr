/* Keplr 1.0 */ Array.prototype.equals=function(t){if(!t)return!1;if(this.length!=t.length)return!1;for(var e=0,i=this.length;e<i;e++)if(this[e]instanceof Array&&t[e]instanceof Array){if(!this[e].equals(t[e]))return!1}else if(this[e]!==t[e])return!1;return!0},Array.prototype.contains=function(t){for(var e=this.length;e--;)if(this[e].equals(t))return!0;return!1},Array.prototype.last=function(t){return this[this.length-(null==t?1:t)]},Array.prototype.swap=function(t,e){let i=this[t];this[t]=this[e],this[e]=i},String.prototype.last=function(t){return this[this.length-(null==t?1:t-1)]},String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)};var Keplr=class{constructor(t){if(this.element=document.querySelector(t),null==this.element)throw new Error("Query Selector returned null.");this.ctx=this.element.getContext("2d"),this.log=console.log,this.warn=console.warn,this.error=console.error,this.noop=(()=>{}),this.tk=0,this.toggleAnimate,this.CREDITS="Made by Gem Games (2020)",this.ctx.lineJoin="round",this.ctx.lineWidth=2,this.ctx.fillStyle="#ffffff",this.FunctionNames="ctx,element,setup,draw,log,warn,error,noop,tk,toggleAnimateEULER,pi,tau,round,power,sqrt,abs,ceil,floor,min,max,squ,random,randInt,dist,mag,norm,map,lerp,angleMode,angleModeisDeg,deg,rad,sin,cos,tan,asin,acos,atan,rotateAngle,translate,scale,rotate,rotateShape,undoRotateShape,fillStyle,strokeStyle,width,height,beginPath,closePath,rect,circle,ellipse,line,triangle,quad,point,bezier,quadBezier,image,background,fill,noFill,stroke,noStroke,strokeWidth,likeWidth,strokeJoin,lineJoin,linearGradient,radialGradient,rgb,rgba,hsl,hsla,hsv,hsva,hsb,hsba,lerpColor,day,month,year,hour,minute,second,millis,CREDITS",this.EULER=Math.E,this.pi=Math.PI,this.tau=2*Math.PI,this.round=Math.round,this.power=Math.pow,this.sqrt=Math.sqrt,this.abs=Math.abs,this.ceil=Math.ceil,this.floor=Math.floor,this.min=Math.min,this.max=Math.max,this.squ=(t=>t*t),this.random=(t=>Math.random()*t),this.randInt=function(t){return this.floor(Math.random()*t)},this.dist=function(t,e,i,s){return this.sqrt(this.squ(this.abs(i-t))+this.squ(this.abs(s-e)))},this.mag=function(t,e){return this.dist(0,0,t,e)},this.norm=((t,e,i)=>(t-e)/(i-e)),this.map=function(t,e,i,s,n){return t<e||t>i?NaN:this.norm(t,e,i)*(n-s)+s},this.lerp=((t,e,i)=>i*(e-t)+t),this.angleMode="DEG",this.angleModeisDeg=(t=>"DEG"==this.angleMode.toUpperCase().substring(0,3)),this.deg=(t=>t*Math.PI/180),this.rad=(t=>t/Math.PI*180),this.sin=function(t){return this.angleModeIsDeg()?Math.sin(this.deg(t)):Math.sin(t)},this.cos=function(t){return this.angleModeIsDeg()?Math.sin(this.deg(t)):Math.sin(t)},this.tan=function(t){return this.angleModeIsDeg()?Math.tan(this.deg(t)):Math.tan(t)},this.asin=function(t){return this.angleModeIsDeg()?this.deg(Math.asin(t)):Math.asin(t)},this.acos=function(t){return this.angleModeIsDeg()?this.deg(Math.acos(t)):Math.acos(t)},this.atan=function(t){return this.angleModeIsDeg()?this.deg(Math.atan(t)):Math.atan(t)},this.rotateAngle=0,this.translate=function(t,e){this.ctx.translate(t,e)},this.scale=function(t,e){this.ctx.scale(t,e)},this.rotate=function(t){this.rotateAngle=this.angleModeIsDeg?this.deg(t):t},this.rotateShape=function(t,e){0!=this.rotateAngle&&(this.ctx.translate(t,e),this.ctx.rotate(this.rotateAngle),this.ctx.translate(-t,-e))},this.undoRotateShape=function(t,e){0!=this.rotateAngle&&(this.ctx.translate(t,e),this.ctx.rotate(this.rotateAngle),this.ctx.translate(-t,-e))},this.fillStyle="#ffffff",this.strokeStyle="#000000",this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.beginPath=function(t,e){this.rotateShape(t,e),this.ctx.beginPath()},this.closePath=function(t,e){!1!==this.fillStyle?(this.ctx.fill(),this.ctx.stroke()):this.ctx.stroke(),this.undoRotateShape(t,e),this.rotateAngle=0},this.rect=function(t,e,i,s){this.rotateShape(t+i,e+s),!1!==this.fillStyle?this.ctx.fillRect(t,e,i,s):this.ctx.strokeRect(t,e,i,s),this.undoRotateShape(t+i,e+s)},this.circle=function(t,e,i){this.beginPath(t,e),this.ctx.arc(t,e,i/2,0,2*this.pi),this.closePath(t,e)},this.ellipse=function(t,e,i,s){this.beginPath(t+i/2,e+s/2),this.ctx.moveTo(t+i/2,e),this.ctx.ellipse(t,e,i/2,s/2,0,0,this.tau),this.closePath(t+i/2,e+s/2)},this.line=function(t,e,i,s){let n=this.lerp(t,i,.5),h=this.lerp(e,s,.5);this.beginPath(n,h),this.ctx.moveTo(t,e),this.ctx.lineTo(i,s),this.closePath(n,h)},this.triangle=function(t,e,i,s,n,h){let o=this.lerp(this.min(t,i,n),this.max(t,i,n),.5),a=this.lerp(this.min(e,s,h),this.max(e,s,h),.5);this.beginPath(o,a),this.ctx.moveTo(t,e),this.ctx.lineTo(i,s),this.ctx.lineTo(n,h),this.ctx.lineTo(t,e),this.closePath(o,a)},this.quad=function(t,e,i,s,n,h,o,a){let r=this.lerp(this.min(t,i,n,o),this.max(t,i,n,o),.5),l=this.lerp(this.min(e,s,h,a),this.max(e,s,h,a),.5);this.beginPath(r,l),this.ctx.moveTo(t,e),this.ctx.lineTo(i,s),this.ctx.lineTo(n,h),this.ctx.lineTo(o,a),this.ctx.lineTo(t,e),this.closePath(r,l)},this.point=function(t,e){this.beginPath(t,e),this.ctx.moveTo(t,e),this.closePath(t,e)},this.bezier=function(t,e,i,s,n,h,o,a){this.beginPath(t,e),this.ctx.moveTo(t,e),this.ctx.bezierCurveTo(i,s,n,h,o,a),this.closePath(t,e)},this.quadBezier=function(t,e,i,s,n,h){this.beginPath(t,e),this.ctx.moveTo(t,e),this.ctx.quadraticCurveTo(i,s,n,h),this.closePath(t,e)},this.image=function(t,e,i){let s=document.createElement("IMG");s.src=t,document.body.appendChild(s);let n=e+s.offsetWidth/2,h=i+s.offsetHeight/2;this.rotateShape(n,h),this.ctx.drawImage(s,e,i),this.undoRotateShape(n,h)},this.background=function(t){this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.fillStyle=this.fillStyle},this.fill=function(t){this.ctx.fillStyle=this.fillStyle=t},this.noFill=function(){this.fillStyle=!1},this.stroke=function(t){this.strokeStyle=t},this.noStroke=function(){this.strokeStyle=!1},this.strokeWidth=this.strokeWeight=this.lineWidth=function(t){this.ctx.lineWidth=t},this.strokeJoin=this.lineJoin=function(t){switch(t.toLowerCase()){case"bevel":this.ctx.lineJoin="bevel";break;case"round":this.ctx.lineJoin="round";break;case"miter":this.ctx.lineJoin="miter";break;default:this.ctx.lineJoin="round"}},this.linearGradient=function(t,e,i,s,n){let h,o=this.ctx.createLinearGradient(t,e,i,s);for(h of n)o.addColorStop(h[0],h[1])},this.radialGradient=function(t,e,i,s,n){let h,o=this.ctx.createLinearGradient(t,e,i,t,e,s);for(h of n)o.addColorStop(h[0],h[1])},this.rgb=function(t,e,i){let s=t=>t.toString(16).padStart(2,"0");return"#"+s(t)+s(e)+s(i)},this.rgba=function(t,e,i,s){let n=t=>t.toString(16);return"#"+n(t)+n(e)+n(i)+n(s)},this.hsl=function(t,e,i){let s,n,h,o,a=e/100,r=i/100,l=this.round;if(0==a)s=n=h=r;else{o=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t};var c=r<.5?r*(1+a):r+a-r*a,u=2*r-c;s=o(u,c,t+1/3),n=o(u,c,t),h=o(u,c,t-1/3)}return this.rgb(l(255*s),l(255*n),l(255*h))},this.hsla=function(t,e,i,s){return"#"+this.hsl(t,e,i)+(255*s).toString(16)},this.hsv=this.hsb=function(t,e,i){var s,n,h,o,a,r,l,c,u=e/100,d=i/100,f=this.round;switch(1===arguments.length&&(u=t.s,d=t.v,t=t.h),r=d*(1-u),l=d*(1-(a=6*t-(o=Math.floor(6*t)))*u),c=d*(1-(1-a)*u),o%6){case 0:s=d,n=c,h=r;break;case 1:s=l,n=d,h=r;break;case 2:s=r,n=d,h=c;break;case 3:s=r,n=l,h=d;break;case 4:s=c,n=r,h=d;break;case 5:s=d,n=r,h=l}return this.rgb(f(255*s),f(255*n),f(255*h))},this.hsva=this.hsba=function(t,e,i,s){return"#"+this.hsv(t,e,i)+(255*s).toString(16)},this.lerpColor=function(t,e){let i,s=t.split(""),n=e.split(""),h=[1,3,5],o="#",a=t=>parseInt(t,16);for(i of h)o+=Math.round((a(s[i]+s[i+1])+a(n[i]+n[i+1]))/2)},this.font=function(t,e){this.ctx.font=`${e||20}px ${t}`},this.textAlign=function(t){this.ctx.textAlign=t},this.text=function(t,e,i){this.ctx.fillText(t,e,i)},this.textWidth=function(t){this.ctx.measureText(t).width},this.day=(t=>(new Date).getDate()),this.month=(t=>(new Date).getMonth()),this.year=(t=>(new Date).getFullYear()),this.hour=(t=>(new Date).getHours()),this.minute=(t=>(new Date).getMinutes()),this.second=(t=>(new Date).getSeconds()),this.millis=(t=>this.loadTime-(new Date).getTime()),this.keyPressed=(()=>{}),this.keyReleased=(()=>{}),this.keyTyped=(()=>{}),this.keyCodes=[],this.keyMatch=[],this.matchKeys=function(t){let e=this.keyCodes;return this.keyMatch.map((t,i)=>"number"==typeof t?e[t]:!t.every(t=>!e[t]))},this.mouseClicked=(()=>{}),this.mousePressed=(()=>{}),this.mouseReleased=(()=>{}),this.mouseMoved=(()=>{}),this.mouseOver=(()=>{}),this.mouseOut=(()=>{}),this.runFunction=function(t){let e,i=[],s=[],n=t[1].split(",");t.forEach(t=>{t.includes("=")&&(i.push(t.split("=")[0]),s.push(t.split("=")[1]))}),i.forEach((t,i)=>{e=s[i].split(","),this[t](e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7])}),n=n.map(t=>1*t==t?1*t:t),this[t[0]](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7])},this.embed=function(t){let e=t.replaceAll("  ","").replaceAll("\n"," ").replaceAll("<","< ").replaceAll(">"," >").split(" "),i=0,s=[];e.forEach(t=>{0==i?"<"==t&&i++:">"==t?(this.runFunction(s),s=[],i=0):s.push(t)})}}set setup(t){t()}set draw(t){let e=this;document.addEventListener("click",function(t){e.mouseX=t.offsetX,e.mouseY=t.offsetY,e.mouseClicked(t)}),document.addEventListener("mousedown",function(t){e.mouseX=t.offsetX,e.mouseY=t.offsetY,e.mousePressed(t)}),document.addEventListener("mouseup",function(t){e.mouseX=t.offsetX,e.mouseY=t.offsetY,e.mouseReleased(t)}),document.addEventListener("mousedown",function(t){e.mouseX=t.offsetX,e.mouseY=t.offsetY,e.mousePressed(t)}),document.addEventListener("mousemove",function(t){e.mouseX=t.offsetX,e.mouseY=t.offsetY,e.mouseMoved(t)}),document.addEventListener("mouseenter",function(t){e.mouseX=t.offsetX,e.mouseY=t.offsetY,e.mouseOver(t)}),document.addEventListener("mouseleave",function(t){e.mouseX=t.offsetX,e.mouseY=t.offsetY,e.mouseOut(t)}),document.addEventListener("keydown",function(t){e.key=t.key,e.keyCode=t.keyCode,e.keyCodes[t.keyCode]=!0,e.keyPressed(t)}),document.addEventListener("keyup",function(t){e.key=t.key,e.keyCode=t.keyCode,e.keyCodes[t.keyCode]=!1,e.keyReleased(t)}),document.addEventListener("keypress",function(t){e.key=t.key,e.keyCode=t.keyCode,e.keyTyped(t)}),document.addEventListener("load",function(t){e.loadTime=(new Date).getTime(),e.setup()}),this.animate=function(){t(),e.tk++,requestAnimationFrame(e.animate)},1==this.toggleAnimate&&this.animate()}};
